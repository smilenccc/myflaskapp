{% extends 'base.html' %}
{% block content %}
<h2>📄 題目 {{ index }}/{{ total }}</h2>

<form method="POST">
  <p><strong>{{ question.question }}</strong></p>
  <ul>
    {% for key, value in question.options.items() %}
    <li>
      <label>
        <input type="radio" name="answer" value="{{ key }}" required>
        ({{ key }}) {{ value }}
      </label>
    </li>
    {% endfor %}
  </ul>

  {% if time_limit > 0 %}
  <p>⏱️ 每題限時：<span id="countdown">{{ time_limit }}</span> 秒</p>
  <script>
    let timeLeft = {{ time_limit }};
    const countdown = document.getElementById("countdown");
    const timer = setInterval(() => {
      timeLeft--;
      countdown.innerText = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        document.forms[0].submit();
      }
    }, 1000);
  </script>
  {% endif %}

  <br>
  <button type="submit">提交答案</button>
</form>
{% endblock %}
